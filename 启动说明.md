# VideoGenius 项目启动说明

## 项目简介

**VideoGenius** 是一个AI驱动的自动视频生成工具，只需提供一个视频主题或关键词，就可以全自动生成：
- 视频文案
- 视频素材
- 视频字幕
- 视频背景音乐
- 最终合成高清短视频

## 系统要求

- **操作系统**: Windows 10 或更高版本
- **Python版本**: Python 3.11 或 3.12（推荐）
- **内存**: 建议4GB或以上
- **CPU**: 建议4核或以上

## 已安装的依赖包

项目已成功安装以下核心依赖：

```
streamlit==1.40.1          # Web界面框架
fastapi==0.115.12          # API框架
uvicorn==0.34.2             # ASGI服务器
loguru==0.7.3               # 日志库
openai==1.82.0              # OpenAI API客户端
edge-tts==6.1.19            # 语音合成
moviepy==2.2.1              # 视频处理
faster-whisper==1.1.1       # 语音识别
g4f==0.5.3.1                # GPT4Free
aiohttp==3.12.2             # 异步HTTP客户端
pyyaml==6.0.2               # YAML配置文件解析
requests                    # HTTP请求库
```

## 启动方式

### 方式一：Web界面启动（推荐）

```bash
# 切换到项目目录
cd /d D:\mycode\other\VideoGenius

# 启动Web界面
py -m streamlit run webui/Main.py --browser.gatherUsageStats=False --server.enableCORS=True
```

**访问地址**: http://localhost:8501

### 方式二：使用批处理文件启动

```bash
# 在项目根目录下运行
webui.bat
```

### 方式三：API服务启动

```bash
# 启动API服务
py main.py
```

**API文档地址**: 
- http://127.0.0.1:8080/docs
- http://127.0.0.1:8080/redoc

## 配置文件

项目使用 `config.toml` 作为配置文件，已从 `config.example.toml` 复制创建。

### 重要配置项

1. **视频素材来源**
   ```toml
   video_source = "pexels"  # 或 "pixabay"
   ```

2. **AI模型提供商**
   ```toml
   llm_provider = "openai"  # 支持多种提供商
   ```

3. **字幕生成方式**
   ```toml
   subtitle_provider = "edge"  # 或 "whisper"
   ```

### 🔥 硅基流动DeepSeek配置（已配置）

项目已配置使用硅基流动的DeepSeek-V3模型：

```toml
[app]
llm_provider = "openai"
openai_api_key = "sk-ktuflbyyozyoyrznigqkutyiwqhdpttsarpesiahxmwkikvz"
openai_base_url = "https://api.siliconflow.cn/v1"
openai_model_name = "deepseek-ai/DeepSeek-V3"
```

**配置说明**：
- **API提供商**: 硅基流动 (SiliconFlow)
- **模型**: DeepSeek-V3 (Pro版本)
- **兼容性**: 使用OpenAI兼容接口
- **优势**: 国内访问稳定，性能优秀，成本较低

### 其他AI模型配置选项

如需使用其他AI模型，可以修改以下配置：

#### OpenAI官方
```toml
llm_provider = "openai"
openai_api_key = "your-openai-api-key"
openai_base_url = ""  # 留空使用官方API
openai_model_name = "gpt-4o-mini"
```

#### 月之暗面 (Moonshot)
```toml
llm_provider = "moonshot"
moonshot_api_key = "your-moonshot-api-key"
moonshot_base_url = "https://api.moonshot.cn/v1"
moonshot_model_name = "moonshot-v1-8k"
```

#### 通义千问 (Qwen)
```toml
llm_provider = "qwen"
qwen_api_key = "your-qwen-api-key"
qwen_model_name = "qwen-max"
```

## 功能特性

### ✅ 已实现功能
- [x] 完整的MVC架构，代码结构清晰
- [x] 支持API和Web界面两种使用方式
- [x] 支持视频文案AI自动生成和自定义文案
- [x] 支持多种高清视频尺寸（竖屏9:16、横屏16:9）
- [x] 支持批量视频生成
- [x] 支持中文和英文视频文案
- [x] 支持多种语音合成，可实时试听
- [x] 支持字幕生成，可调整字体、位置、颜色、大小
- [x] 支持背景音乐，可设置音量
- [x] 高清无版权视频素材
- [x] 支持多种AI模型接入

### 🔄 计划功能
- [ ] GPT-SoVITS 配音支持
- [ ] 优化语音合成，使声音更自然
- [ ] 增加视频转场效果
- [ ] 增加更多视频素材来源
- [ ] 支持更多语音合成服务商
- [ ] 自动上传到YouTube平台

## 使用步骤

1. **启动项目**
   ```bash
   py -m streamlit run webui/Main.py --browser.gatherUsageStats=False --server.enableCORS=True
   ```

2. **打开浏览器**
   访问 http://localhost:8501

3. **配置API密钥**
   - 在Web界面中配置所需的API密钥
   - 如Pexels API Key（用于获取视频素材）
   - AI模型API Key（用于生成文案）

4. **创建视频**
   - 输入视频主题或关键词
   - 选择视频参数（尺寸、时长等）
   - 点击生成，等待AI自动创建视频

## 常见问题解决

### 1. 缺少依赖包
如果遇到 `ModuleNotFoundError`，请安装对应的包：
```bash
py -m pip install [包名]
```

### 2. 端口被占用
如果8501端口被占用，可以指定其他端口：
```bash
py -m streamlit run webui/Main.py --server.port 8502
```

### 3. ImageMagick配置
Windows用户需要安装ImageMagick并配置路径：
- 下载静态库版本的ImageMagick
- 在config.toml中设置imagemagick_path

### 4. FFmpeg配置
如果遇到FFmpeg错误，可以手动下载并配置：
- 下载FFmpeg
- 在config.toml中设置ffmpeg_path

## 项目结构

```
VideoGenius/
├── app/                    # 应用核心代码
│   ├── config/            # 配置管理
│   ├── models/            # 数据模型
│   ├── services/          # 业务服务
│   └── utils/             # 工具函数
├── webui/                 # Web界面
│   ├── Main.py           # 主界面文件
│   └── i18n/             # 国际化文件
├── resource/              # 资源文件
│   ├── fonts/            # 字体文件
│   └── songs/            # 背景音乐
├── storage/               # 存储目录
├── config.toml           # 配置文件
├── requirements.txt      # 依赖列表
├── main.py              # API服务入口
└── webui.bat            # Windows启动脚本
```

## 技术支持

- **项目地址**: https://github.com/huang-jianhua/VideoGenius
- **问题反馈**: https://github.com/huang-jianhua/VideoGenius/issues
- **版本**: v1.2.6

## 注意事项

1. **网络要求**: 需要稳定的网络连接来下载视频素材和调用AI服务
2. **API配额**: 注意各种API服务的使用配额限制
3. **存储空间**: 生成的视频会占用一定的磁盘空间
4. **版权问题**: 使用的视频素材来源于免费素材网站，但请注意使用条款

---

**项目启动成功！** 🎉

当前服务状态：
- Web界面: ✅ 运行中 (http://localhost:8501)
- 端口监听: ✅ 8501端口正常监听
- 依赖安装: ✅ 核心依赖已安装完成

现在你可以在浏览器中访问 http://localhost:8501 开始使用VideoGenius创建AI视频了！ 